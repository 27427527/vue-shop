<script setup lang="ts">
import { RouterLink, RouterView } from 'vue-router'
import { ref,computed } from "vue"
import { useUserStore } from "@/stores/user"
import { useBannerStore } from "@/stores/banner"
import { useCateStore } from "@/stores/cate"

const bannerstore = useBannerStore()
bannerstore.getBanners()

const caterstore = useCateStore()
caterstore.getCates()


const userstore = useUserStore()
userstore.isAuthenticated()
const auth= computed(() => userstore.auth)

if(auth.value==true){
userstore.getCurrentUser()
}

const users = computed(() =>{

   return userstore.users

   });

   
const cate_list = computed(() =>{

   return caterstore.cate_list

   });

function logout(){

  userstore.logout()
  
}






</script>

<template>
<div class="h77">  </div>
    <div class="header">
  
        <div class="bg"></div>
        <div class="w">
            <a href="/" class="logo">
                <img class="header-logo" src="@/assets/image/logo.png" alt="" />
            </a>
            <div class="header-item">
                <ul class="header-ul">
                               <li><RouterLink to="/index">首页</RouterLink></li>

                               <li v-for="(v, i) in cate_list" :key="v.cate_id">
                                <RouterLink :to="v.slug">{{v.name}}</RouterLink>

                                 <ul class="sub-menu-ul">
                                   <li v-for="item in v.children" :key="item.cate_id">
                                <RouterLink :to="v.slug+'?cate='+item.cate_id">{{item.name}}</RouterLink>
                                </li>

                                </ul>


                                </li>

                               <li><RouterLink to="/">联系我们</RouterLink></li>
                
                </ul>
            </div>

       
            <div class="header-search">
                <input type="text" placeholder="综合搜索" />
            </div>

            <div class="header-item">
                <ul>

                 


                    <li  v-show="!auth">

                        <router-link to="/login">登录/注册</router-link>
                    </li>

                     <li v-show="auth">

                       <router-link to="/login">{{users.name}}</router-link>
                  
                    </li>

                      <li @click="logout" v-show="auth">
<a>   退出 </a>
                   
                  
                    </li>

                     <li v-show="auth">

                        <router-link to="/login">个人中心</router-link>
                    </li>

                    <li>

                        <router-link to="/login">购物车(0)</router-link>
                    </li>


                 


                </ul>
            </div>
        </div>
    </div>
</template>

<style scoped>
.h77{
   height: 77px;
}
.header {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 99;
  height: 77px;
  background: #fff;
}

.header .bg {
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 1;
  height: 77px;
  background: #fff;
  box-shadow: 1px 1px 2px 1px rgba(99, 99, 99, 0.1);
  opacity: 1;
}

.header .w {
  position: relative;
  z-index: 2;
  display: flex;
  align-items: center;
}

.header .logo {
  width: 60px;
  margin-right: 20px;
}

.header img {
  width: 100%;
  height: 100%;
}

.header-item {
  /* flex: 1; */
}

.header-item ul {
  display: flex;
  align-items: center;
  height: 77px;
}

.header-item ul li {
  padding: 0 11px;
  position: relative;
  width:100px;
}

.header-item ul li a {
  color: #000;
}

.header-ul .router-link-active{
  font-weight: 700;
}

.header-ul .router-link-active::before{
   content: "";
  width: 50%;
  position: absolute;
  left: 25%;
  bottom: -10px;
  height: 2px;
  background-color: #ff5000;

}

.header-item ul li a:hover {
  font-weight: 700;
}

.header-item ul li a:hover::before {
  content: "";
  width: 50%;
  position: absolute;
  left: 25%;
  bottom: -10px;
  height: 2px;
  background-color: #ff5000;
}

.sub-menu-ul {
  position:absolute;
  top:20px;
  left:0;
  width:100%;
  display:column;

}

.sub-menu-ul li{
  
  width:100%;
  height:30px;
  background:#ececec;
  color:#fff;
  float:left;
  

  
}

/* 搜索框 */
.header-search input {
  border: 0;
}

.header-search {
  width: 300px;
  height: 36px;
  background: #fff;
  border: 2px solid #ff5000;
  border-radius: 8px;
  margin-right: 8px;
  padding: 0 10px;
  display: flex;
  align-items: center;
  transition: 0.5s;
}



</style>